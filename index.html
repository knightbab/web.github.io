<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open and Monitor Window</title>
    <a href = "https://cross-origin-isolation.glitch.me/coop?coop=same-origin&">打开新窗口</a>
    <script>
        function openAndMonitorWindow() {
            // 打开新窗口
            const url = "https://cross-origin-isolation.glitch.me/coop?coop=unsafe-none&";
            const newWindow = window.open(url);
            document.getElementById("content").innerText = "新页面加载中";
            setTimeout(function () {
                document.getElementById("content").innerText = "新页面加载完成";
                    // 尝试获取新窗口的网页内容
                document.getElementById("contentDisplay").innerText = "获取新页面内容中";
                    const content = newWindow.document.body.innerHTML;
                document.getElementById("contentDisplay").innerText = " ";
                    // 如果获取成功，将内容显示在当前页面
                    document.getElementById("contentDisplay").innerText = content;
            }, 3000)
        }
    </script>
</head>
<body>
    <h1>Open and Monitor Window</h1>
    <button onclick="openAndMonitorWindow()">Open Window</button>
    <div id="contentDisplay" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;">
        点击按钮打开窗口并获取内容
    </div>
    <div id="content" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;">
        页面加载结果
    </div>
</body>
</html>
